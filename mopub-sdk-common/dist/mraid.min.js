/*! 3.2.1 - mraid 2014-11-26 */
!function(){var a=/iphone|ipad|ipod/i.test(window.navigator.userAgent.toLowerCase());a&&(console={},console.log=function(a){var b=document.createElement("iframe");b.setAttribute("src","ios-log: "+a),document.documentElement.appendChild(b),b.parentNode.removeChild(b),b=null},console.debug=console.info=console.warn=console.error=console.log)}(),function(){var a=window.mraidbridge={},b=!1,c={},d=[],e=!1;a.fireReadyEvent=function(){b=!0,a.fireEvent("ready")},a.fireChangeEvent=function(b){a.fireEvent("change",b)},a.fireErrorEvent=function(b,c){a.fireEvent("error",b,c)},a.fireEvent=function(a){var b=c[a];if(b){var d=Array.prototype.slice.call(arguments);d.shift();for(var e=b.length,f=0;e>f;f++)b[f].apply(null,d)}},a.nativeCallComplete=function(){if(0===d.length)return void(e=!1);var a=d.pop();window.location=a},a.executeNativeCall=function(c){if(!b)return console.log("rejecting "+c+" because mraid is not ready"),void a.fireErrorEvent("mraid is not ready",c);for(var f,g,h="mraid://"+c,i=!0,j=1;j<arguments.length;j+=2)f=arguments[j],g=arguments[j+1],null!==g&&(i?(h+="?",i=!1):h+="&",h+=encodeURIComponent(f)+"="+encodeURIComponent(g));e?d.push(h):(e=!0,window.location=h)},a.addEventListener=function(a,b){var d;c[a]=c[a]||[],d=c[a];for(var e in d)if(b===e)return;d.push(b)},a.removeEventListener=function(a,b){if(c.hasOwnProperty(a)){var d=c[a];if(d){var e=d.indexOf(b);-1!==e&&d.splice(e,1)}}}}(),function(){var a=window.mraid={},b=window.mraidbridge;b.setCurrentPosition=function(a,b,c,d){k={x:a,y:b,width:c,height:d},v(e.INFO,"Set current position to "+x(k))},b.setDefaultPosition=function(a,b,c,d){l={x:a,y:b,width:c,height:d},v(e.INFO,"Set default position to "+x(l))},b.setMaxSize=function(a,b){j={width:a,height:b},v(e.INFO,"Set max size to "+x(j))},b.setPlacementType=function(a){s=a,v(e.INFO,"Set placement type to "+x(s))},b.setScreenSize=function(a,b){m={width:a,height:b},v(e.INFO,"Set screen size to "+x(m))},b.setState=function(a){q=a,v(e.INFO,"Set state to "+x(q)),v(e.STATECHANGE,q)},b.setIsViewable=function(a){r=a,v(e.INFO,"Set isViewable to "+x(r)),v(e.VIEWABLECHANGE,r)},b.setSupports=function(){},b.notifySizeChangeEvent=function(a,b){c&&a==c.width&&b==c.height||(c={width:a,height:b},v(e.SIZECHANGE,a,b))};var c,d=(a.VERSION="1.0",a.STATES={LOADING:"loading",DEFAULT:"default",EXPANDED:"expanded",HIDDEN:"hidden",RESIZED:"resized"}),e=a.EVENTS={ERROR:"error",INFO:"info",READY:"ready",STATECHANGE:"stateChange",VIEWABLECHANGE:"viewableChange",SIZECHANGE:"sizeChange"},f=a.PLACEMENT_TYPES={UNKNOWN:"unknown",INLINE:"inline",INTERSTITIAL:"interstitial"},g={width:-1,height:-1,useCustomClose:!1,isModal:!0,lockOrientation:!1},h={width:!1,height:!1,offsetX:!1,offsetY:!1,customClosePosition:"top-right",allowOffscreen:!0},i={allowOrientationChange:!0,forceOrientation:"none"},j={},k={},l={},m={},n=!1,o=!1,p={},q=d.LOADING,r=!1,s=f.UNKNOWN,t={sms:!1,tel:!1,calendar:!1,storePicture:!1,inlineVideo:!1},u=function(a){this.event=a,this.count=0;var b={};this.add=function(a){var c=String(a);b[c]||(b[c]=a,this.count++)},this.remove=function(a){var c=String(a);return b[c]?(b[c]=null,delete b[c],this.count--,!0):!1},this.removeAll=function(){for(var a in b)b.hasOwnProperty(a)&&this.remove(b[a])},this.broadcast=function(a){for(var c in b)b.hasOwnProperty(c)&&b[c].apply({},a)},this.toString=function(){var c=[a,":"];for(var d in b)b.hasOwnProperty(d)&&c.push("|",d,"|");return c.join("")}},v=function(){for(var a=new Array(arguments.length),b=arguments.length,c=0;b>c;c++)a[c]=arguments[c];var d=a.shift();p[d]&&p[d].broadcast(a)},w=function(a,b){for(var c in b)if(b[c]===a)return!0;return!1},x=function(a){if("object"==typeof a){var b=[];if(a.push){for(var c in a)b.push(a[c]);return"["+b.join(",")+"]"}for(var c in a)b.push("'"+c+"': "+a[c]);return"{"+b.join(",")+"}"}return String(a)},y={state:function(a){q===d.LOADING&&v(e.INFO,"Native SDK initialized."),q=a,v(e.INFO,"Set state to "+x(a)),v(e.STATECHANGE,q)},viewable:function(a){r=a,v(e.INFO,"Set isViewable to "+x(a)),v(e.VIEWABLECHANGE,r)},placementType:function(a){v(e.INFO,"Set placementType to "+x(a)),s=a},sizeChange:function(a){v(e.INFO,"Set screenSize to "+x(a));for(var b in a)a.hasOwnProperty(b)&&(m[b]=a[b]);n||(g.width=m.width,g.height=m.height)},supports:function(a){v(e.INFO,"Set supports to "+x(a)),t=a}},z=function(a,b,c,d){if(!d){if(null===a)return v(e.ERROR,"Required object not provided.",c),!1;for(var f in b)if(b.hasOwnProperty(f)&&void 0===a[f])return v(e.ERROR,"Object is missing required property: "+f+".",c),!1}for(var g in a){var h=b[g],i=a[g];if(h&&!h(i))return v(e.ERROR,"Value of property "+g+" is invalid.",c),!1}return!0},A={width:function(a){return!isNaN(a)&&a>=0},height:function(a){return!isNaN(a)&&a>=0},useCustomClose:function(a){return"boolean"==typeof a},lockOrientation:function(a){return"boolean"==typeof a}};b.addEventListener("change",function(a){for(var b in a)if(a.hasOwnProperty(b)){var c=y[b];c(a[b])}}),b.addEventListener("error",function(a,b){v(e.ERROR,a,b)}),b.addEventListener("ready",function(){v(e.READY)}),a.addEventListener=function(a,b){a&&b?w(a,e)?(p[a]||(p[a]=new u(a)),p[a].add(b)):v(e.ERROR,"Unknown MRAID event: "+a,"addEventListener"):v(e.ERROR,"Both event and listener are required.","addEventListener")},a.close=function(){q===d.HIDDEN?v(e.ERROR,"Ad cannot be closed when it is already hidden.","close"):b.executeNativeCall("close")},a.expand=function(a){if(this.getState()!==d.DEFAULT)v(e.ERROR,"Ad can only be expanded from the default state.","expand");else{var c=["expand"];this.getHasSetCustomClose()&&(c=c.concat(["shouldUseCustomClose",g.useCustomClose?"true":"false"])),"undefined"!=typeof g.lockOrientation&&(c=c.concat(["lockOrientation",g.lockOrientation])),a&&(c=c.concat(["url",a])),b.executeNativeCall.apply(this,c)}},a.getHasSetCustomClose=function(){return o},a.getHasSetCustomSize=function(){return n},a.getExpandProperties=function(){var a={width:g.width,height:g.height,useCustomClose:g.useCustomClose,isModal:g.isModal};return a},a.getCurrentPosition=function(){return{x:k.x,y:k.y,width:k.width,height:k.height}},a.getDefaultPosition=function(){return{x:l.x,y:l.y,width:l.width,height:l.height}},a.getMaxSize=function(){return{width:j.width,height:j.height}},a.getPlacementType=function(){return s},a.getScreenSize=function(){return{width:m.width,height:m.height}},a.getState=function(){return q},a.isViewable=function(){return r},a.getVersion=function(){return a.VERSION},a.open=function(a){a?b.executeNativeCall("open","url",a):v(e.ERROR,"URL is required.","open")},a.removeEventListener=function(a,b){if(!a)return void v(e.ERROR,"Event is required.","removeEventListener");if(b){var c=!1;if(p[a]&&(c=p[a].remove(b)),!c)return void v(e.ERROR,"Listener not currently registered for event.","removeEventListener")}else!b&&p[a]&&p[a].removeAll();p[a]&&0===p[a].count&&(p[a]=null,delete p[a])},a.setExpandProperties=function(a){if(z(a,A,"setExpandProperties",!0)){(a.hasOwnProperty("width")||a.hasOwnProperty("height"))&&(n=!0),a.hasOwnProperty("useCustomClose")&&(o=!0);for(var b=["width","height","useCustomClose","lockOrientation"],c=b.length,d=0;c>d;d++){var e=b[d];a.hasOwnProperty(e)&&(g[e]=a[e])}}},a.useCustomClose=function(a){g.useCustomClose=a,o=!0,b.executeNativeCall("usecustomclose","shouldUseCustomClose",a)},a.createCalendarEvent=function(a){C.initialize(a),C.parse()?b.executeNativeCall.apply(this,C.arguments):v(e.ERROR,C.errors[0],"createCalendarEvent")},a.supports=function(a){return t[a]},a.playVideo=function(c){return a.isViewable()?void(c?b.executeNativeCall.apply(this,["playVideo","uri",c]):v(e.ERROR,"playVideo must be called with a valid URI","playVideo")):void v(e.ERROR,"playVideo cannot be called until the ad is viewable","playVideo")},a.storePicture=function(c){return a.isViewable()?void(c?b.executeNativeCall.apply(this,["storePicture","uri",c]):v(e.ERROR,"storePicture must be called with a valid URI","storePicture")):void v(e.ERROR,"storePicture cannot be called until the ad is viewable","storePicture")};var B={width:function(a){return!isNaN(a)&&a>0},height:function(a){return!isNaN(a)&&a>0},offsetX:function(a){return!isNaN(a)},offsetY:function(a){return!isNaN(a)},customClosePosition:function(a){return"string"==typeof a&&["top-right","bottom-right","top-left","bottom-left","center","top-center","bottom-center"].indexOf(a)>-1},allowOffscreen:function(a){return"boolean"==typeof a}};a.setOrientationProperties=function(a){a.hasOwnProperty("allowOrientationChange")&&(i.allowOrientationChange=a.allowOrientationChange),a.hasOwnProperty("forceOrientation")&&(i.forceOrientation=a.forceOrientation);var c=["setOrientationProperties","allowOrientationChange",i.allowOrientationChange,"forceOrientation",i.forceOrientation];b.executeNativeCall.apply(this,c)},a.getOrientationProperties=function(){return{allowOrientationChange:i.allowOrientationChange,forceOrientation:i.forceOrientation}},a.resize=function(){if(this.getState()!==d.DEFAULT&&this.getState()!==d.RESIZED)v(e.ERROR,"Ad can only be resized from the default or resized state.","resize");else if(z(h,B,"setResizeProperties",!0)){var a=["resize","width",h.width,"height",h.height,"offsetX",h.offsetX||0,"offsetY",h.offsetY||0,"customClosePosition",h.customClosePosition,"allowOffscreen",!!h.allowOffscreen];b.executeNativeCall.apply(this,a)}else v(e.ERROR,"Must set valid resize properties before calling resize()","resize")},a.getResizeProperties=function(){var a={width:h.width,height:h.height,offsetX:h.offsetX,offsetY:h.offsetY,customClosePosition:h.customClosePosition,allowOffscreen:h.allowOffscreen};return a},a.setResizeProperties=function(a){if(z(a,B,"setResizeProperties",!0))for(var b=["width","height","offsetX","offsetY","customClosePosition","allowOffscreen"],c=b.length,d=0;c>d;d++){var f=b[d];a.hasOwnProperty(f)&&(h[f]=a[f])}else v(e.ERROR,"Must include width, height, offsetX, and offsetY","resize")};var C={initialize:function(a){this.parameters=a,this.errors=[],this.arguments=["createCalendarEvent"]},parse:function(){this.parameters?(this.parseDescription(),this.parseLocation(),this.parseSummary(),this.parseStartAndEndDates(),this.parseReminder(),this.parseRecurrence(),this.parseTransparency()):this.errors.push("The object passed to createCalendarEvent cannot be null.");var a=this.errors.length;return a&&(this.arguments.length=0),0===a},parseDescription:function(){this._processStringValue("description")},parseLocation:function(){this._processStringValue("location")},parseSummary:function(){this._processStringValue("summary")},parseStartAndEndDates:function(){this._processDateValue("start"),this._processDateValue("end")},parseReminder:function(){var a=this._getParameter("reminder");a&&(0>a?(this.arguments.push("relativeReminder"),this.arguments.push(parseInt(a)/1e3)):(this.arguments.push("absoluteReminder"),this.arguments.push(a)))},parseRecurrence:function(){var a=this._getParameter("recurrence");a&&(this.parseRecurrenceInterval(a),this.parseRecurrenceFrequency(a),this.parseRecurrenceEndDate(a),this.parseRecurrenceArrayValue(a,"daysInWeek"),this.parseRecurrenceArrayValue(a,"daysInMonth"),this.parseRecurrenceArrayValue(a,"daysInYear"),this.parseRecurrenceArrayValue(a,"monthsInYear"))},parseTransparency:function(){var a=["opaque","transparent"];if(this.parameters.hasOwnProperty("transparency")){var b=this.parameters.transparency;w(b,a)?(this.arguments.push("transparency"),this.arguments.push(b)):this.errors.push("transparency must be opaque or transparent")}},parseRecurrenceArrayValue:function(a,b){if(a.hasOwnProperty(b)){var c=a[b];if(c&&c instanceof Array){var d=c.join(",");this.arguments.push(b),this.arguments.push(d)}else this.errors.push(b+" must be an array.")}},parseRecurrenceInterval:function(a){if(a.hasOwnProperty("interval")){var b=a.interval;b?(this.arguments.push("interval"),this.arguments.push(b)):this.errors.push("Recurrence interval cannot be null.")}else this.arguments.push("interval"),this.arguments.push(1)},parseRecurrenceFrequency:function(a){if(a.hasOwnProperty("frequency")){var b=a.frequency,c=["daily","weekly","monthly","yearly"];w(b,c)?(this.arguments.push("frequency"),this.arguments.push(b)):this.errors.push('Recurrence frequency must be one of: "daily", "weekly", "monthly", "yearly".')}},parseRecurrenceEndDate:function(a){var b=a.expires;b&&(this.arguments.push("expires"),this.arguments.push(b))},_getParameter:function(a){return this.parameters.hasOwnProperty(a)?this.parameters[a]:null},_processStringValue:function(a){if(this.parameters.hasOwnProperty(a)){var b=this.parameters[a];this.arguments.push(a),this.arguments.push(b)}},_processDateValue:function(a){if(this.parameters.hasOwnProperty(a)){var b=this._getParameter(a);this.arguments.push(a),this.arguments.push(b)}}}}();